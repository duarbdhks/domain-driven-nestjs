## 목적

microservice 아키텍처를 위한 애플리케이션을 구현합니다.    
도메인 주도 설계(Domain Driven Design)로 마이크로서비스 아키텍처의 개별 서비스를 설계하였습니다.  
여기서는 typescript 를 사용하는 nodejs 프레임워크인 NestJS 를 사용하여 도메인 중심 설계 애플리케이션을 구현합니다.

도메인 중심 설계는 인터페이스, 애플리케이션, 도메인, 인프라로 구성된 네 가지 계층으로 구성됩니다.  
각 계층은 서로 다른 계층에 의존하며, 가장 중요한 계층인 도메인 계층부터 시작합니다.

## 도메인 계층 (Domain Layer)

도메인 레이어는 도메인 중심 설계의 핵심 레이어이자 **어떤 레이어에도 의존하지 않는** 최상위 레이어입니다.  
여기에는 Aggregate, Entity, VO 로 구성되어 있고, 핵심 비즈니스 로직이 있습니다.  
또한 비즈니스 로직에 필요한 도메인 모델의 Repository 인터페이스가 여기에 정의됩니다.  
인터페이스가 분리된 패턴으로 Repository 의 인터페이스는 도메인 레이어에 존재하고 구현은 인프라 레이어에 존재합니다.  
도메인 객체를 만들 때 factory 패턴을 사용하였습니다.

## 애플리케이션 계층 (Application Layer)

애플리케이션 계층은 도메인 계층에 종속되어 **사용자 시나리오**를 구현합니다. 해당 계층에는 Service 가 존재하며, Service 는 도메인 모델의 도메인 로직을 실행합니다.

또한 외부 통신을 위한 어댑터는 여기에서 인터페이스로 정의됩니다. 이를 통해 동기 또는 비동기 방식으로 MSA의 다른 서비스와의 통합을 구성할 수 있습니다.

Service 에서는 도메인 객체를 생성하거나 리포지토리에서 가져와 도메인 로직을 실행한 후 리포지토리를 통해 저장합니다.

## 인터페이스 계층 (Interface Layer)

인터페이스 계층에서는 애플리케이션 계층에 의존하여 필요한 Controller 를 생성하고, 해당 Controller 를 통해 애플리케이션 계층의 Service 를 실행합니다.

이 계층은 사용자 또는 다른 서비스에 제공되는 인터페이스를 정의합니다. 또한 http, 큐 메시지 등을 수신하여 요청을 확인하고 응답을 반환합니다.

## 인프라 계층 (Infrastructure Layer)

인프라 계층은 각 계층의 세부 기술을 구현하는 역할을 담당합니다.

여기에는 도메인의 Repository, 애플리케이션의 어댑터, 인터페이스의 컨트롤러 등의 기술 콘텐츠가 포함될 수 있습니다.

예를 들어 데이터베이스 구현 및 액세스(Repository 구현체), 통신 또는 메시징 시스템(애플리케이션 어댑터), 캐싱 또는 외부 통신 기술 등이 있습니다.

이러한 모든 세부 구현을 인프라 계층에 두면 기술 변경 사항을 격리하여 변경 사항이 다른 부분으로 확산되지 않도록 할 수 있습니다.

<img width="502" src="assets/images/ddd-layer.png" alt="ddd layer">
